{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableBody = table.tBodies[0];\nconst rows = [...tableBody.rows];\nconst tHeadCells = document.querySelectorAll('thead th');\n\nconst form = document.createElement('form');\nconst cities = [\n  'Tokyo',\n  'Singapore',\n  'London',\n  'New York',\n  'Edinburgh',\n  'San Francisco',\n];\n\nform.innerHTML = `\n\t<label>Name: <input name=\"name\" type=\"text\" minlength=\"4\" pattern=\"\\\\S.{3,}\" required data-qa=\"name\"></label>\n\n\t<label>Position: <input name=\"position\" type=\"text\" pattern=\"\\\\S.{3,}\" required data-qa=\"position\"></label>\n\n\t<label>\n\tOffice: \n\t<select name=\"office\" data-qa=\"office\" required>\n\t\t${cities.map((city) => `<option value=\"${city}\">${city}</option>`).join('')}\n\t</select>\n\t</label>\n\n\t<label>Age: <input name=\"age\" type=\"number\" min=\"18\" max=\"90\" required data-qa=\"age\"></label>\n\n\t<label>Salary: <input name=\"salary\" type=\"number\" required data-qa=\"salary\"></label>\n\n\t<button type=\"submit\">Save to table</button>`;\n\nform.classList.add('new-employee-form');\nform.setAttribute('novalidate', 'novalidate');\n\nconst notification = document.createElement('div');\n\nnotification.classList.add('notification');\nnotification.setAttribute('data-qa', 'notification');\n\ndocument.body.append(form);\n\nconst stringToDigit = (string) => {\n  return +string.replace(/\\D/g, '');\n};\n\nfunction addActiv() {\n  rows.forEach((row) => {\n    row.addEventListener('click', () => {\n      rows.forEach((el) => el.classList.remove('active'));\n      row.classList.add('active');\n    });\n  });\n}\n\nfunction validationForm(e) {\n  e.preventDefault();\n\n  const invalidFields = [...form.querySelectorAll(':invalid')];\n\n  [...form.elements].forEach((field) => {\n    if (field.checkValidity()) {\n      field.style.border = '';\n      field.style.backgroundColor = '';\n    }\n  });\n\n  if (form.checkValidity()) {\n    notification.classList.remove('error');\n    notification.classList.add('success');\n    notification.innerText = 'The employee is added to the table';\n    notification.style.display = '';\n    document.body.prepend(notification);\n    addEmployee();\n  } else {\n    notification.textContent = '';\n  }\n\n  invalidFields.forEach((field) => {\n    if (!field.checkValidity()) {\n      notification.classList.remove('success');\n      notification.classList.add('error');\n      notification.style.display = '';\n      document.body.prepend(notification);\n\n      field.style.border = '2px solid red';\n      field.style.backgroundColor = '#ffe6e6';\n\n      if (field.validity.patternMismatch) {\n        notification.textContent = 'This field cannot be just spaces';\n      } else if (field.validity.valueMissing) {\n        notification.textContent = 'Fill in this field';\n      } else if (field.validity.tooShort) {\n        notification.textContent = `Text must be at least 4 characters long (you entered ${field.value.length} characters)`;\n      } else if (field.validity.rangeUnderflow) {\n        notification.textContent = 'Value must be greater than or equal to 18';\n      } else if (field.validity.rangeOverflow) {\n        notification.textContent = 'The value must be less than or equal to 90';\n      }\n    }\n  });\n\n  setTimeout(() => {\n    notification.style.display = 'none';\n  }, 2000);\n}\n\nfunction addEmployee() {\n  const formData = new FormData(form);\n  const formDataArr = [];\n\n  formData.forEach((value, key) => {\n    if (key === 'salary') {\n      const dataValue = +value;\n      const formatedValue = '$' + dataValue.toLocaleString('en-US');\n\n      formDataArr.push(formatedValue);\n    } else {\n      formDataArr.push(value);\n    }\n  });\n\n  const newRow = tableBody.insertRow();\n\n  formDataArr.forEach((el) => {\n    newRow.insertCell().textContent = el;\n  });\n\n  rows.push(newRow);\n\n  addActiv();\n\n  form.reset();\n}\n\nfunction editingCells() {\n  const tableCells = [...tableBody.querySelectorAll('td')];\n\n  tableCells.forEach((cell) => {\n    cell.addEventListener('dblclick', (e) => {\n      const activeInput = document.querySelector('.cell-input');\n\n      if (activeInput) {\n        const activeCell = activeInput.parentElement;\n\n        activeCell.textContent =\n          activeInput.value.trim() || activeInput.dataset.prevVal;\n        activeInput.remove();\n      }\n\n      const prevContent = cell.textContent;\n\n      cell.textContent = '';\n\n      const input = document.createElement('input');\n\n      input.classList.add('cell-input');\n      input.value = prevContent;\n      input.setAttribute('data-prev-val', prevContent);\n      cell.append(input);\n      input.focus();\n\n      //   cell.setAttribute('contenteditable', 'true');\n      //   cell.focus();\n\n      input.addEventListener('blur', () => {\n        cell.textContent = input.value.trim() || prevContent;\n        input.remove();\n\n        // cell.removeAttribute('contenteditable');\n      });\n\n      input.addEventListener('keyup', (keyboard) => {\n        if (keyboard.key === 'Enter') {\n          input.blur();\n\n          //   cell.blur();\n        }\n      });\n    });\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  addActiv();\n\n  let asc = true;\n  let prevIndecs;\n\n  tHeadCells.forEach((cell, i) => {\n    cell.addEventListener('click', () => {\n      if (prevIndecs !== i) {\n        asc = true;\n      }\n\n      const sortBy = asc ? 1 : -1;\n\n      const sortedRows = rows.sort((a, b) => {\n        const contentsA = a.cells[i].textContent;\n        const contentsB = b.cells[i].textContent;\n\n        if (i === 4) {\n          return (stringToDigit(contentsA) - stringToDigit(contentsB)) * sortBy;\n        }\n\n        return contentsA.localeCompare(contentsB) * sortBy;\n      });\n\n      prevIndecs = i;\n      asc = !asc;\n\n      tableBody.append(...sortedRows);\n    });\n  });\n\n  form.addEventListener('submit', validationForm);\n\n  editingCells();\n});\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}